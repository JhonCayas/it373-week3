{% extends 'base.html' %}
{% block title %} Post List {% endblock %}
{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Posts <span class="badge bg-primary">{{ posts.count }}</span></h1>
    
    {% for post in posts %}
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <h6 class="card-subtitle text-muted mb-2">
                Posted on {{ post.created_at|date:"M d, Y H:i" }} ({{ post.created_at|timesince }} ago)
            </h6>
            <p class="card-text mt-3">{{ post.body }}</p>
        </div>
        <div class="card-footer bg-light">
            <h5 class="mb-3">Comments <span class="badge bg-secondary">{{ post.comments.count }}</span></h5>
            <ul class="list-group list-group-flush">
                {% for comment in post.comments.all %}
                    <li class="list-group-item">
                        <strong>{{ comment.author }}:</strong> {{ comment.text }} 
                        <span class="text-muted small"> ({{ comment.created_at|timesince }} ago)</span>
                    </li>
                {% empty %}
                    <li class="list-group-item text-muted">No comment yet.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% empty %}
    <div class="alert alert-info">No post yet.</div>
    {% endfor %}
</div>
{% endblock %}
